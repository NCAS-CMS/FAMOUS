# ----------------------------- COPYRIGHT ---------------------------- #   COPYRIGHT.634   
#           (c) BRITISH CROWN COPYRIGHT 2000, THE MET.OFFICE           #   COPYRIGHT.635   
#                                                                      #   COPYRIGHT.636   
# Use, duplication or disclosure of this code is subject to the        #   COPYRIGHT.637   
# restrictions as set forth in the contract. If no contract has been   #   COPYRIGHT.638   
# raised with this copy of the code, use, duplication or disclosure    #   COPYRIGHT.639   
# of it is strictly prohibited. Permission to do so must be obtained   #   COPYRIGHT.640   
# in writing from the Head of Numerical Modelling at The Met. Office.  #   COPYRIGHT.641   
# ----------------------------- COPYRIGHT ---------------------------- #   COPYRIGHT.642   
#LL---------------------------------------------------------------------   mkscripts.2     
#LL  Script:  mkscripts                                                    mkscripts.3     
#LL---------------------------------------------------------------------   mkscripts.4     
#LL                                                                        mkscripts.5     
#LL  Purpose: This script will extract the scripts required by the UM      mkscripts.6     
#LL           from the umsl (nupdate script library).  The extracted       mkscripts.7     
#LL           scripts will be in the correct form for the computer         mkscripts.8     
#LL           platform they will be executed on.                           mkscripts.9     
#LL                                                                        mkscripts.10    
#LL  Current Owner: Tracey Smith                                           mkscripts.11    
#LL  Reviewer: Karen Rogers             Date of review: 06/09/94           mkscripts.12    
#LL                                                                        mkscripts.13    
#LL  Tested under OS version:                                              mkscripts.14    
#LL  UM version no: 3.4                 Date of test:                      mkscripts.15    
#LL                                                                        mkscripts.16    
#LL  History:                                                              mkscripts.17    
#LL   Model                                                                mkscripts.18    
#LL  version  Date     Modification history:                               mkscripts.19    
#LL    3.3    18/07/94 Original version (Tracey Smith).                    mkscripts.20    
#LL    3.3    01/08/94 Pass output from nupdate through sed to             mkscripts.21    
#LL                    remove trailing spaces  (Tracey Smith)              mkscripts.22    
#LL    3.3    03/08/94 Include extra category 'source' and improve         mkscripts.23    
#LL                    error check after nupdate (Tracey Smith)            mkscripts.24    
#LL    3.3    06/09/94 Removed linkdataymp.  Added makeancil,              mkscripts.25    
#LL                    makeancilex and ancilnamel.  (Karen Rogers)         mkscripts.26    
#LL    3.4    15/11/94 Changed CRAY to METOCRAY. Added CRAYPVP CRAYMPP     GNF3U403.1     
#LL                    Removed references to old archive scripts. (KMR)    mkscripts.28    
#LL    3.4    08/12/94 Altered machines some scripts built on (K Rogers)   mkscripts.29    
#LL    4.0    23/10/95 Removed hedit,hprint and substartrun scripts.       mkscripts.30    
#LL                    (Myles Turp).                                       mkscripts.31    
#LL    4.3    27/02/97 Change GENERIC to CRAYMPP                           GNF3U403.2     
#LL                    Remove unpackmodel from build.(N.Farnon)            GNF3U403.3     
#LL    4.2    14/10/96 Changes for T3E                (L Wiles)            GLW3U402.10    
#LL    4.3    15/05/97 Added utils directory for small execs (L Wiles)     GLW5U403.1     
#LL    4.5    14/07/98 Added functions directory for script functions.     GAV3U405.47    
#LL                    Added decks containing functions.                   GAV3U405.48    
#LL                    Added missing utils for workstations.               GAV3U405.49    
#LL                    (A Van der Wal)                                     GAV3U405.50    
#LL    4.5    25/09/98 Add test to mkdir directories if not there.         GWR8U405.7     
#LL                    Deletion/deletion of various ancil scripts.         GWR8U405.8     
#LL                                                                        mkscripts.32    
#LL  Programming standard: UMDP 3, version 7                               mkscripts.33    
#LL                                                                        mkscripts.34    
#LL  Project task:                                                         mkscripts.35    
#LL                                                                        mkscripts.36    
#LL  Logical components covered:                                           mkscripts.37    
#LL                                                                        mkscripts.38    
#LL  External documentation:                                               mkscripts.39    
#LL                                                                        mkscripts.40    
#L   Interface and arguments:  None                                        mkscripts.41    
#L                                                                         mkscripts.42    
#L   -------------------------------------------------------------------   mkscripts.43    
#L                                                                         mkscripts.44    
#L   Called by:                                                            mkscripts.45    
#L   Calls    : None                                                       mkscripts.46    
#L                                                                         mkscripts.47    
#L   Imports:                                                              mkscripts.48    
#L     SETOPT        -  options for the "set" command                      GSH1U403.1     
#L     VN            -  version number                                     GSH1U403.2     
#L     TMPDIR        -  temporary directory name                           GSH1U403.3     
#L     UMDIR         -  Unified Model directory name                       GSH1U403.4     
#L     UMMACHINE     -  target computer platform type (eg CRAY or HP)      GSH1U403.5     
#L     SCRMODS       -  mods for the scripts                               PXMKSCR.1     
#L                                                                         mkscripts.54    
#L   Exports:                                                              mkscripts.55    
#L                                                                         mkscripts.56    
#L   Local variables:                                                      mkscripts.57    
#L     UMSL          -  the nupdate format library of scripts              GSH1U403.6     
#L     RUNTIME       -  directory for runtime scripts to reside in         GSH1U403.7     
#L     INSTALL       -  directory for installation scripts to reside in    GSH1U403.8     
#L     UTILS            -  directory for free-standing small execs         GSH1U403.9     
#L     XREF          -  cross-reference file for script info               GSH1U403.10    
#L     FILENAME      -  name of the script to create                       GSH1U403.11    
#L     DECKNAME      -  name of deck holding FILENAME                      GSH1U403.12    
#L     DEST          -  destination (RUNTIME or INSTALL) directory         GSH1U403.13    
#L     SUPPORTED     -  list of platforms that FILENAME is required on     GSH1U403.14    
#L     DUMMY         -  separator between items on line in XREF            GSH1U403.15    
#L     NAME          -  each platform in SUPPORTED                         GSH1U403.16    
#L     MATCH         -  true: file required on this platform               GSH1U403.17    
#L                      -  false: file not required on this platform       mkscripts.69    
#L     LOCATION      -  directory and filename for the output of nupdate   GSH1U403.18    
#L     ERRFLAG       -  flag indicating if error has occured               GSH1U403.19    
#L                                                                         mkscripts.72    
#L End of header -------------------------------------------------------   mkscripts.73    
#L Step 0 - Set up environment variables                                   mkscripts.74    
#L                                                                         mkscripts.75    
SETOPT="$SETOPT"a                                                          mkscripts.76    
set -$SETOPT                                                               mkscripts.77    
                                                                           GKR0U401.1     
# Include system-wide variables declared in setglobalvars.                 GKR0U401.2     
VN=4.5                                                                     GKR1U405.42    
. $UMDIR/vn$VN/scripts/setglobalvars                                       GKR0U401.4     
                                                                           GKR0U401.5     
RUNTIME=$UMDIR/vn$VN/scripts                                               mkscripts.80    
if test ! -d $RUNTIME                                                      GWR8U405.9     
then                                                                       GWR8U405.10    
  echo "Creating directory $RUNTIME"                                       GWR8U405.11    
  mkdir -p $RUNTIME                                                        GWR8U405.12    
fi                                                                         GWR8U405.13    
                                                                           GWR8U405.14    
UTILS=$UMDIR/vn$VN/utils                                                   GLW5U403.2     
if test ! -d $UTILS                                                        GWR8U405.15    
then                                                                       GWR8U405.16    
  echo "Creating directory $UTILS"                                         GWR8U405.17    
  mkdir -p $UTILS                                                          GWR8U405.18    
fi                                                                         GWR8U405.19    
                                                                           GWR8U405.20    
INSTALL=$UMDIR/vn$VN/scripts/Install                                       mkscripts.81    
if test ! -d $INSTALL                                                      GWR8U405.21    
then                                                                       GWR8U405.22    
  echo "Creating directory $INSTALL"                                       GWR8U405.23    
  mkdir -p $INSTALL                                                        GWR8U405.24    
fi                                                                         GWR8U405.25    
                                                                           GWR8U405.26    
SOURCE=$UMDIR/vn$VN/source                                                 mkscripts.82    
if test ! -d $SOURCE                                                       GWR8U405.27    
then                                                                       GWR8U405.28    
  echo "Creating directory $SOURCE"                                        GWR8U405.29    
  mkdir -p $SOURCE                                                         GWR8U405.30    
fi                                                                         GWR8U405.31    
                                                                           GWR8U405.32    
EXEC=$UMDIR/vn$VN/exec                                                     GWR8U405.33    
if test ! -d $EXEC                                                         GWR8U405.34    
then                                                                       GWR8U405.35    
  echo "Creating directory $EXEC"                                          GWR8U405.36    
  mkdir -p $EXEC                                                           GWR8U405.37    
fi                                                                         GWR8U405.38    
                                                                           GWR8U405.39    
FUNCTIONS=$UMDIR/vn$VN/scripts/functions                                   GAV3U405.51    
if test ! -d $FUNCTIONS                                                    GAV3U405.52    
then                                                                       GAV3U405.53    
  echo "Creating directory $FUNCTIONS"                                     GAV3U405.54    
  mkdir -p $FUNCTIONS                                                      GAV3U405.55    
fi                                                                         GAV3U405.56    
                                                                           GAV3U405.57    
UMSL=$UMDIR/vn$VN/source/umsl                                              mkscripts.83    
XREF=$TMPDIR/scrxref                                                       mkscripts.84    
                                                                           mkscripts.90    
echo You are using version $VN of the Unified Model                        mkscripts.91    
                                                                           mkscripts.92    
#L ---------------------------------------------------------------------   mkscripts.93    
#L Step 1 - Create the script cross-reference file                         mkscripts.94    
#L                                                                         mkscripts.95    
cat > $XREF <<\EOF                                                         mkscripts.96    
addcompileopts    :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.14    
addcompileopts    :: f :: LINUX OTHER                                      PXMKSCR.15    
allmods           :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.16    
allmods           :: r :: LINUX OTHER                                      PXMKSCR.17    
allcompfiles      :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.18    
allcompfiles      :: r :: LINUX OTHER                                      PXMKSCR.19    
ancil_mask        :: r :: METOCRAY                                         PXMKSCR.20    
ancil_orog        :: r :: METOCRAY                                         PXMKSCR.21    
ancil_ozone       :: r :: METOCRAY                                         PXMKSCR.22    
ancil_slt         :: r :: METOCRAY                                         PXMKSCR.23    
ancil_smow        :: r :: METOCRAY                                         PXMKSCR.24    
ancil_sstice      :: r :: METOCRAY                                         PXMKSCR.25    
ancil_top         :: r :: METOCRAY                                         PXMKSCR.26    
ancil_vegsoil     :: r :: METOCRAY                                         PXMKSCR.27    
archfail          :: r :: METOCRAY                                         PXMKSCR.28    
autopp_tidyup     :: r :: METOCRAY                                         PXMKSCR.29    
bcreconf          :: u :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.30    
bcreconf          :: u :: LINUX OTHER                                      PXMKSCR.31    
camelot           :: r :: METOCRAY                                         PXMKSCR.32    
camjobinfo        :: r :: METOCRAY                                         PXMKSCR.33    
cdecks            :: s :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.34    
cdecks            :: s :: LINUX OTHER                                      PXMKSCR.35    
checkhdefs        :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.36    
checkhdefs        :: f :: LINUX OTHER                                      PXMKSCR.37    
comp_parse        :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.38    
comp_parse        :: r :: LINUX OTHER                                      PXMKSCR.39    
comp_specific     :: s :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.40    
comp_specific     :: s :: LINUX OTHER                                      PXMKSCR.41    
configure_all_sects :: i :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++    PXMKSCR.42    
configure_all_sects :: i :: LINUX OTHER                                    PXMKSCR.43    
configure_execs   :: i :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.44    
configure_execs   :: i :: LINUX OTHER                                      PXMKSCR.45    
convpp            :: u :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.46    
convpp            :: u :: LINUX OTHER                                      PXMKSCR.47    
copy2dest         :: r :: METOCRAY                                         PXMKSCR.48    
cray2hds          :: r :: METOCRAY                                         PXMKSCR.49    
createcomb        :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.50    
createcomb        :: f :: LINUX OTHER                                      PXMKSCR.51    
cumf              :: u :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.52    
cumf              :: u :: LINUX OTHER                                      PXMKSCR.53    
exec_xref_base    :: s :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.54    
exec_xref_base    :: s :: LINUX OTHER                                      PXMKSCR.55    
expandpath        :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.56    
expandpath        :: f :: LINUX OTHER                                      PXMKSCR.57    
fieldop           :: u :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.58    
fieldop           :: u :: LINUX OTHER                                      PXMKSCR.59    
findstr           :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.60    
findstr           :: f :: LINUX OTHER                                      PXMKSCR.61    
flower            :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.62    
flower            :: f :: LINUX OTHER                                      PXMKSCR.63    
fnlistopt         :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.64    
fnlistopt         :: f :: LINUX OTHER                                      PXMKSCR.65    
fnmycut           :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.66    
fnmycut           :: f :: LINUX OTHER                                      PXMKSCR.67    
fnmydiff          :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.68    
fnmydiff          :: f :: LINUX OTHER                                      PXMKSCR.69    
fnnewcom          :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.70    
fnnewcom          :: f :: LINUX OTHER                                      PXMKSCR.71    
fnusage           :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.72    
fnusage           :: f :: LINUX OTHER                                      PXMKSCR.73    
fupper            :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.74    
fupper            :: f :: LINUX OTHER                                      PXMKSCR.75    
gen_sed_string    :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.76    
gen_sed_string    :: f :: LINUX OTHER                                      PXMKSCR.77    
getarchdate       :: r :: METOCRAY                                         PXMKSCR.78    
getfile           :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.79    
getfile           :: r :: LINUX OTHER                                      PXMKSCR.80    
hdstransfer       :: r :: METOCRAY                                         PXMKSCR.81    
ieee              :: u :: METOCRAY CRAYPVP CRAYMPP                         PXMKSCR.82    
initxport         :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.83    
initxport         :: f :: LINUX OTHER                                      PXMKSCR.84    
load_parse        :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.85    
load_parse        :: r :: LINUX OTHER                                      PXMKSCR.86    
lower             :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.87    
lower             :: f :: LINUX OTHER                                      PXMKSCR.88    
makebc            :: u :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.89    
makebc            :: u :: LINUX OTHER                                      PXMKSCR.90    
makefile_in       :: i :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.91    
makefile_in       :: i :: LINUX OTHER                                      PXMKSCR.92    
makefile_bot_in   :: i :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.93    
makefile_bot_in   :: i :: LINUX OTHER                                      PXMKSCR.94    
makefile_exec_in  :: i :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.95    
makefile_exec_in  :: i :: LINUX OTHER                                      PXMKSCR.96    
makefile_execmid_in :: i :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++    PXMKSCR.97    
makefile_execmid_in :: i :: LINUX OTHER                                    PXMKSCR.98    
makefile_mid_in   :: i :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.99    
makefile_mid_in   :: i :: LINUX OTHER                                      PXMKSCR.100   
makefile_top_in   :: i :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.101   
makefile_top_in   :: i :: LINUX OTHER                                      PXMKSCR.102   
makefileu_comp_in :: s :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.103   
makefileu_comp_in :: s :: LINUX OTHER                                      PXMKSCR.104   
makefileu_link_in :: s :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.105   
makefileu_link_in :: s :: LINUX OTHER                                      PXMKSCR.106   
max               :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.107   
max               :: f :: LINUX OTHER                                      PXMKSCR.108   
mergecomb         :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.109   
mergecomb         :: f :: LINUX OTHER                                      PXMKSCR.110   
mergeum           :: u :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.111   
mergeum           :: u :: LINUX OTHER                                      PXMKSCR.112   
mkcompvars        :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.113   
mkcompvars        :: r :: LINUX OTHER                                      PXMKSCR.114   
mkdirhier         :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.115   
mkdirhier         :: f :: LINUX OTHER                                      PXMKSCR.116   
mkobjxref         :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.117   
mkobjxref         :: r :: LINUX OTHER                                      PXMKSCR.118   
mkexecxref        :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.119   
mkexecxref        :: r :: LINUX OTHER                                      PXMKSCR.120   
newpphist         :: r :: METOCRAY                                         PXMKSCR.121   
nocombinations    :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.122   
nocombinations    :: f :: LINUX OTHER                                      PXMKSCR.123   
obj_xref_base     :: s :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.124   
obj_xref_base     :: s :: LINUX OTHER                                      PXMKSCR.125   
ppcray2hds        :: r :: METOCRAY                                         PXMKSCR.126   
pptoanc           :: u :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.127   
pptoanc           :: u :: LINUX OTHER                                      PXMKSCR.128   
pumf              :: u :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.129   
pumf              :: u :: LINUX OTHER                                      PXMKSCR.130   
qscasedisp        :: r :: METOCRAY                                         PXMKSCR.131   
qsoasis           :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.132   
qsoasis           :: r :: LINUX OTHER                                      PXMKSCR.133   
qscombine         :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.134   
qscombine         :: r :: LINUX OTHER                                      PXMKSCR.135   
qsfinal           :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.136   
qsfinal           :: r :: LINUX OTHER                                      PXMKSCR.137   
qshistprint       :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.138   
qshistprint       :: r :: LINUX OTHER                                      PXMKSCR.139   
qshistreset       :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.140   
qshistreset       :: r :: LINUX OTHER                                      PXMKSCR.141   
qslistobj         :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.142   
qslistobj         :: r :: LINUX OTHER                                      PXMKSCR.143   
qsmain            :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.144   
qsmain            :: r :: LINUX OTHER                                      PXMKSCR.145   
qsmaster          :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.146   
qsmaster          :: r :: LINUX OTHER                                      PXMKSCR.147   
qsmncompile       :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.148   
qsmncompile       :: r :: LINUX OTHER                                      PXMKSCR.149   
qsconf            :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.150   
qsconf            :: r :: LINUX OTHER                                      PXMKSCR.151   
qspickup          :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.152   
qspickup          :: r :: LINUX OTHER                                      PXMKSCR.153   
qsprelim          :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.154   
qsprelim          :: r :: LINUX OTHER                                      PXMKSCR.155   
qsresubmit        :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.156   
qsresubmit        :: r :: LINUX OTHER                                      PXMKSCR.157   
qsserver          :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.158   
qsserver          :: r :: LINUX OTHER                                      PXMKSCR.159   
qssetup           :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.160   
qssetup           :: r :: LINUX OTHER                                      PXMKSCR.161   
sortarray         :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.162   
sortarray         :: f :: LINUX OTHER                                      PXMKSCR.163   
restartinfo       :: r :: METOCRAY                                         PXMKSCR.164   
stoprun           :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.165   
stoprun           :: r :: LINUX OTHER                                      PXMKSCR.166   
startrun          :: r :: METOCRAY                                         PXMKSCR.167   
submitchk         :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.168   
submitchk         :: r :: LINUX OTHER                                      PXMKSCR.169   
updscripts        :: r :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.170   
updscripts        :: r :: LINUX OTHER                                      PXMKSCR.171   
upper             :: f :: METOCRAY CRAYPVP CRAYMPP HP DECALPHA SGI ++      PXMKSCR.172   
upper             :: f :: LINUX OTHER                                      PXMKSCR.173   
EOF                                                                        mkscripts.158   
                                                                           mkscripts.159   
#L ---------------------------------------------------------------------   mkscripts.171   
#L Step 2 - Create the script to process each line of the                  mkscripts.172   
#L          cross-reference file                                           mkscripts.173   
#L                                                                         mkscripts.174   
cat > $TMPDIR/readloop <<\EOF                                              mkscripts.175   
set -$SETOPT                                                               mkscripts.176   
export SETOPT                                                              mkscripts.177   
cd $TMPDIR                                                                 mkscripts.178   
ERRFLAG=0                                                                  mkscripts.179   
PREVFILE=""                                                                PXMKSCR.174   
MATCH=false                                                                PXMKSCR.175   
                                                                           mkscripts.180   
# read first line of XREF file                                             mkscripts.181   
read FILENAME DUMMY DEST DUMMY SUPPORTED                                   mkscripts.182   
RC=$?                                                                      mkscripts.183   
until test $RC -ne 0                                                       mkscripts.184   
do                                                                         mkscripts.185   
                                                                           mkscripts.186   
  if test ! \( "$FILENAME" = "$PREVFILE" -a "$MATCH" = "true" \)           PXMKSCR.176   
  then                                                                     PXMKSCR.177   
  # is the script required on the secified platform                        mkscripts.187   
  MATCH=false                                                              mkscripts.188   
  MESSAGE=true                                                             PXMKSCR.178   
  for NAME in $SUPPORTED                                                   mkscripts.189   
  do                                                                       mkscripts.190   
    if test "$NAME" = "$UMMACHINE"                                         mkscripts.191   
    then                                                                   mkscripts.192   
      MATCH=true                                                           mkscripts.193   
    fi                                                                     mkscripts.194   
    if test "$NAME" = "++" -a "$MATCH" = "false"                           PXMKSCR.179   
    then                                                                   PXMKSCR.180   
      MESSAGE=false                                                        PXMKSCR.181   
    fi                                                                     PXMKSCR.182   
  done                                                                     mkscripts.195   
                                                                           mkscripts.196   
  if test "$MESSAGE" = "true"                                              PXMKSCR.183   
  then                                                                     PXMKSCR.184   
  # print message to screen                                                mkscripts.197   
  echo                                                                     mkscripts.198   
  echo "==============================================================="   mkscripts.199   
  echo                                                                     mkscripts.200   
  echo "Job to make script: $FILENAME"                                     mkscripts.201   
  fi                                                                       PXMKSCR.185   
                                                                           mkscripts.202   
  # if the scripts is required on this platform                            mkscripts.203   
  if test "$MATCH" = "true"                                                mkscripts.204   
  then                                                                     mkscripts.205   
                                                                           mkscripts.206   
    # extract script from nupdate library                                  mkscripts.207   
    DECKNAME=$FILENAME                                                     mkscripts.208   
                                                                           mkscripts.234   
    echo "Extracting Deck: $DECKNAME with DEFS: $SCRDEFS"                  GPB0U401.3     
    if test "$SCRMODS" != ""                                               PXMKSCR.2     
    then                                                                   PXMKSCR.3     
      if test -s $SCRMODS                                                  PXMKSCR.4     
      then                                                                 PXMKSCR.5     
        nupdate -d "$SCRDEFS" -p "$UMSL" -c "$FILENAME" -q "$DECKNAME" \   PXMKSCR.6     
                -i "$SCRMODS"                                              PXMKSCR.7     
      else                                                                 PXMKSCR.8     
        nupdate -d "$SCRDEFS" -p "$UMSL" -c "$FILENAME" -q "$DECKNAME"     PXMKSCR.9     
      fi                                                                   PXMKSCR.10    
    else                                                                   PXMKSCR.11    
      nupdate -d "$SCRDEFS" -p "$UMSL" -c "$FILENAME" -q "$DECKNAME"       PXMKSCR.12    
    fi                                                                     PXMKSCR.13    
    if test $? -ne 0                                                       mkscripts.236   
    then                                                                   mkscripts.237   
      echo                                                                 mkscripts.238   
      echo ***ERROR:  Problem extracting script $FILENAME from $UMSL       mkscripts.239   
      ERRFLAG=1                                                            mkscripts.240   
    else                                                                   mkscripts.241   
                                                                           mkscripts.242   
      # move file made by nupdate to appropriate directory                 mkscripts.243   
      if test "$DEST" = "i"                                                GLW3U402.81    
      then                                                                 mkscripts.245   
        LOCATION="$INSTALL/$FILENAME"                                      mkscripts.246   
      elif test "$DEST" = "u"                                              GLW5U403.3     
      then                                                                 GLW5U403.4     
        LOCATION="$UTILS/$FILENAME"                                        GLW5U403.5     
      elif test "$DEST" = "f"                                              GAV3U405.79    
      then                                                                 GAV3U405.80    
        LOCATION="$FUNCTIONS/$FILENAME"                                    GAV3U405.81    
      elif test "$DEST" = "s"                                              GLW3U402.82    
      then                                                                 mkscripts.248   
        LOCATION="$SOURCE/$FILENAME"                                       mkscripts.250   
        if test $FILENAME = 'cdecks'                                       GLW3U402.83    
        then                                                               GLW3U402.84    
          # remove the extra #'s in files that are already decks           GLW3U402.85    
                                                                           GLW3U402.86    
          $UM_SED "s/^#\*/*/" $FILENAME.f > temp1                          PXUTILTY.155   
           #change leading "#*" to "*"                                     GPB0U401.5     
          $UM_SED "s/^#+/+/" temp1 > temp2                                 PXUTILTY.156   
           #change leading "#+" to "+"                                     GPB0U401.7     
          mv temp2 $FILENAME.f                                             GLW3U402.89    
        fi                                                                 GLW3U402.90    
      else                                                                 mkscripts.254   
        LOCATION="$RUNTIME/$FILENAME"                                      mkscripts.255   
      fi                                                                   mkscripts.256   
      # remove trailing spaces left by nupdate                             mkscripts.257   
      $UM_SED "s/ *$//" "$FILENAME".f > $LOCATION                          PXUTILTY.157   
      if test $? -eq 0                                                     mkscripts.259   
      then                                                                 mkscripts.260   
        echo ***INFO: File $LOCATION sucessfully created                   mkscripts.261   
      else                                                                 mkscripts.262   
        echo ***ERROR: File $LOCATION not created                          mkscripts.263   
        ERRFLAG=1                                                          mkscripts.264   
      fi                                                                   mkscripts.265   
      rm "$FILENAME".f                                                     mkscripts.266   
    fi                                                                     mkscripts.267   
                                                                           mkscripts.268   
  else                                                                     mkscripts.269   
    if test "$MESSAGE" = "true"                                            PXMKSCR.186   
    then                                                                   PXMKSCR.187   
      echo ***NOTE: Script $FILENAME is not required on this platform      PXMKSCR.188   
    fi                                                                     PXMKSCR.189   
  fi                                                                       mkscripts.271   
                                                                           mkscripts.272   
  fi                                                                       PXMKSCR.190   
  PREVFILE=$FILENAME                                                       PXMKSCR.191   
  # read next line of XREF file                                            mkscripts.273   
  read FILENAME DUMMY DEST DUMMY SUPPORTED                                 mkscripts.274   
  RC=$?                                                                    mkscripts.275   
                                                                           mkscripts.276   
done                                                                       mkscripts.277   
echo                                                                       mkscripts.278   
echo "==============================================================="     mkscripts.279   
banner script making complete                                              mkscripts.280   
if test $ERRFLAG -ne 0                                                     mkscripts.281   
then                                                                       mkscripts.282   
  echo ***Errors have been encountered                                     mkscripts.283   
fi                                                                         mkscripts.284   
echo "==============================================================="     mkscripts.285   
EOF                                                                        mkscripts.286   
                                                                           mkscripts.287   
#L ---------------------------------------------------------------------   mkscripts.288   
#L Step 3 - Execute the readloop to produce the scripts required           mkscripts.289   
#L                                                                         mkscripts.290   
chmod u+x $TMPDIR/readloop                                                 mkscripts.291   
cat $XREF|$TMPDIR/readloop                                                 mkscripts.292   
                                                                           GLW3U402.91    
rm $XREF $TMPDIR/readloop                                                  mkscripts.295   
chmod 775 $SOURCE/* $RUNTIME/* $INSTALL/* $UTILS/* $FUNCTIONS/*            GAV3U405.82    
